{"version":3,"sources":["../src/util.js","../src/h.js","../src/vdom/index.js","../src/extend.js","../src/dom/index.js","../src/vdom/diff.js","../src/we-element.js","../src/render.js","../src/define.js","../src/clone-element.js","../src/get-host.js","../src/class.js","../node_modules/construct-style-sheets-polyfill/dist/adoptedStyleSheets.js","../src/options.js","../src/o.js","../src/omi.js"],"names":["cssToDom","css","node","document","createElement","textContent","camelCase","str","replace","$1","toUpperCase","Fragment","props","children","extend","obj","i","applyRef","ref","value","current","isArray","Object","prototype","toString","call","pathToArr","path","split","hyphenate","hyphenateRE","toLowerCase","getValByPath","arr","forEach","prop","h","nodeName","attributes","lastSimple","child","simple","arguments","length","stack","push","pop","undefined","String","p","key","options","vnode","isSameNodeType","_componentConstructor","splitText","mapping","hydrating","extend$1","name","handler","extension","origin","set","get","e","type","eventProxy","el","_listeners","addEventListener","createNode","removeNode","setAccessor","component","old","isSvg","className","style","cssText","IS_NON_DIMENSIONAL","test","innerHTML","constructor","is","bindEvent","pureRemoveAttribute","removeAttribute","ns","removeAttributeNS","pureSetAttribute","setAttribute","useCapture","event","nameLower","eventProxy$1","ret","diffLevel","isSvgMode","parent","ownerSVGElement","dom","innerDiffNode","updateSelf","item","index","ele","one","idiff","recollectNodeTree","parentNode","appendChild","out","nodeValue","createTextNode","replaceChild","vnodeName","vchildren","firstChild","fc","a","nextSibling","noSlot","dangerouslySetInnerHTML","diffAttributes","prevSvgMode","min","len","childrenLen","vlen","j","keyedLen","originalChildren","keyed","vchild","_child","_component","__key","trim","isHydrating","c","f","unmountOnly","ATTR_KEY","removeChildren","oldClone","assign","receiveProps","isWeElement","attrs","ccName","indexOf","_ccName","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","HTMLElement","WeElement","diff","_classCallCheck$1","_possibleConstructorReturn$1","ctor","customElements","config","define","Ele","_WeElement","_temp","_this","_ret","_len","args","Array","this","apply","concat","compute","propTypes","defaultProps","isLightDom","storeHelpers","func","target","cloneElement","getHost","host","shadowRoot","rpx","b","window","innerWidth","Number","classNames","classes","argType","arg","inner","join","_Array$prototype$slic","slice","class","unshift","o","JSON","stringify","createRef","store","root","global","Math","Reflect","hasOwnProperty","BuiltInHTMLElement","construct","setPrototypeOf","Promise","resolve","then","bind","setTimeout","_HTMLElement","elementId","id","computed","isInstalled","connectedCallback","attrsToProps","beforeInstall","install","afterInstall","attachShadow","mode","removeChild","replaceSync","adoptedStyleSheets","styleSheet","styleSheets","CSSStyleSheet","adoptedStyleSheet","rootNode","rendered","_customStyleContent","_customStyleElement","installed","disconnectedCallback","uninstall","update","ignoreAttrs","beforeUpdate","_willUpdate","beforeRender","forceUpdate","updated","_this2","updateProps","prevProps","val","keys","getAttribute","Boolean","substr","Omi","$","parse","fire","data","dispatchEvent","CustomEvent","detail","_contents","contents","importPattern","console","warn","clearRules","sheet","cssRules","deleteRule","insertAllRules","from","to","rule","insertRule","isElementConnected","element","isConnected","contains","unique","filter","arr1","arr2","getShadowRoot","closedShadowRootRegistry","isCSSStyleSheetInstance","proto$2","isPrototypeOf","nonConstructedProto","isNonConstructedStyleSheetInstance","addAdopterLocation","location","adopter","$adoptersByLocation","$locations","getAdopterByLocation","removeAdopterLocation","delete","_location","restyleAdopter","requestAnimationFrame","$basicStyleSheet","checkInvocationCorrectness","has","ConstructedStyleSheet","bootstrapper","body","WeakMap","getAssociatedLocation","locations","Location","attachAdoptedStyleSheetProperty","defineProperty","configurable","enumerable","sheets","traverseWebComponents","callback","iter","createNodeIterator","NodeFilter","SHOW_ELEMENT","foundNode","FILTER_ACCEPT","FILTER_REJECT","next","nextNode","isExistingAdopter","HTMLStyleElement","$uniqueSheets","some","getAdopterContainer","$element","Document","adopt","styleList","createDocumentFragment","observer","$observer","container","disconnect","insertBefore","observe","defaultObserverOptions","MutationObserver","mutations","mutation","hasShadyCss","addedNodes","Element","connect","removedNodes","ShadyCSS","nativeShadow","implementation","createHTMLDocument","cssStyleSheetMethods","NonConstructedStyleSheet","reject","_DOMException","self_1","ownerNode","rejectImports","method","basic","result","Symbol","hasInstance","childList","subtree","proto$1","readyState","locationType","every","oldUniqueSheets","uniqueSheets","removedSheets","proto","attach_1","init","documentLocation","Component","defineElement","elements","omi","render","tag","extractClass","unbind","version","module","exports"],"mappings":"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","file":"omi.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\n/**\n * This shim allows elements written in, or compiled to, ES5 to work on native\n * implementations of Custom Elements v1. It sets new.target to the value of\n * this.constructor so that the native HTMLElement constructor can access the\n * current under-construction element's definition.\n */\n; (function () {\n\tif (\n\t\t// No Reflect, no classes, no need for shim because native custom elements\n\t\t// require ES2015 classes or Reflect.\n\t\twindow.Reflect === undefined ||\n\t\twindow.customElements === undefined ||\n\t\t// The webcomponentsjs custom elements polyfill doesn't require\n\t\t// ES2015-compatible construction (`super()` or `Reflect.construct`).\n\t\twindow.customElements.hasOwnProperty('polyfillWrapFlushCallback')\n\t) {\n\t\treturn\n\t}\n\tconst BuiltInHTMLElement = HTMLElement\n\twindow.HTMLElement = function HTMLElement() {\n\t\treturn Reflect.construct(BuiltInHTMLElement, [], this.constructor)\n\t}\n\tHTMLElement.prototype = BuiltInHTMLElement.prototype\n\tHTMLElement.prototype.constructor = HTMLElement\n\tObject.setPrototypeOf(HTMLElement, BuiltInHTMLElement)\n})()\n\nexport function cssToDom(css) {\n\tconst node = document.createElement('style')\n\tnode.textContent = css\n\treturn node\n}\n\nexport function camelCase(str) {\n\treturn str.replace(/-(\\w)/g, ($, $1) => {\n\t\treturn $1.toUpperCase()\n\t})\n}\n\nexport function Fragment(props) {\n\treturn props.children\n}\n\nexport function extend(obj, props) {\n\tfor (let i in props) obj[i] = props[i]\n\treturn obj\n}\n\n/** Invoke or update a ref, depending on whether it is a function or object ref.\n *  @param {object|function} [ref=null]\n *  @param {any} [value]\n */\nexport function applyRef(ref, value) {\n\tif (ref != null) {\n\t\tif (typeof ref == 'function') ref(value)\n\t\telse ref.current = value\n\t}\n}\n\n/**\n * Call a function asynchronously, as soon as possible. Makes\n * use of HTML Promise to schedule the callback if available,\n * otherwise falling back to `setTimeout` (mainly for IE<11).\n * @type {(callback: function) => void}\n */\nexport const defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.resolve().then.bind(Promise.resolve())\n\t\t: setTimeout\n\nexport function isArray(obj) {\n\treturn Object.prototype.toString.call(obj) === '[object Array]'\n}\n\n\nexport function pathToArr(path) {\n\tif (typeof path !== 'string' || !path) return []\n\t// return path.split(/\\.|\\[|\\]/).filter(name => !!name)\n\treturn path\n\t\t.replace(/]/g, '')\n\t\t.replace(/\\[/g, '.')\n\t\t.split('.')\n}\n\nconst hyphenateRE = /\\B([A-Z])/g\nexport function hyphenate(str) {\n\treturn str.replace(hyphenateRE, '-$1').toLowerCase()\n}\n\nexport function getValByPath(path, current) {\n\tconst arr = pathToArr(path)\n\tarr.forEach(prop => {\n\t\tcurrent = current[prop]\n\t})\n\treturn current\n}\n\n\nexport function removeItem(item, arr) {\n\tif (!arr) return\n\tfor (let i = 0, len = arr.length; i < len; i++) {\n\t\tif (arr[i] === item) {\n\t\t\tarr.splice(i, 1)\n\t\t\tbreak\n\t\t}\n\t}\n}\n","import options from './options'\nimport { Fragment } from './util'\n\nconst stack = []\n\nexport function h(nodeName, attributes) {\n  let children = [],\n    lastSimple,\n    child,\n    simple,\n    i\n  for (i = arguments.length; i-- > 2; ) {\n    stack.push(arguments[i])\n  }\n  if (attributes && attributes.children != null) {\n    if (!stack.length) stack.push(attributes.children)\n    delete attributes.children\n  }\n  while (stack.length) {\n    if ((child = stack.pop()) && child.pop !== undefined) {\n      for (i = child.length; i--; ) stack.push(child[i])\n    } else {\n      if (typeof child === 'boolean') child = null\n\n      if ((simple = typeof nodeName !== 'function')) {\n        if (child == null) child = ''\n        else if (typeof child === 'number') child = String(child)\n        else if (typeof child !== 'string') simple = false\n      }\n\n      if (simple && lastSimple) {\n        children[children.length - 1] += child\n      } else if (children.length === 0) {\n        children = [child]\n      } else {\n        children.push(child)\n      }\n\n      lastSimple = simple\n    }\n  }\n\n  if (nodeName === Fragment) {\n    return children\n  }\n\n  const p = {\n    nodeName,\n    children,\n    attributes: attributes == null ? undefined : attributes,\n    key: attributes == null ? undefined : attributes.key\n  }\n\n  // if a \"vnode hook\" is defined, pass every created VNode to it\n  if (options.vnode !== undefined) options.vnode(p)\n\n  return p\n}\n","import { extend } from '../util'\nimport options from '../options'\n/**\n * Check if two nodes are equivalent.\n *\n * @param {Node} node      DOM Node to compare\n * @param {VNode} vnode      Virtual DOM node to compare\n * @param {boolean} [hydrating=false]  If true, ignores component constructors when comparing.\n * @private\n */\nexport function isSameNodeType(node, vnode, hydrating) {\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    return node.splitText !== undefined\n  }\n  if (typeof vnode.nodeName === 'string') {\n    return !node._componentConstructor && isNamedNode(node, vnode.nodeName)\n  } else if (typeof vnode.nodeName === 'function') {\n    return options.mapping[node.nodeName.toLowerCase()] === vnode.nodeName\n  }\n  return hydrating || node._componentConstructor === vnode.nodeName\n}\n\n/**\n * Check if an Element has a given nodeName, case-insensitively.\n *\n * @param {Element} node  A DOM Element to inspect the name of.\n * @param {String} nodeName  Unnormalized name to compare against.\n */\nexport function isNamedNode(node, nodeName) {\n  return (\n    node.normalizedNodeName === nodeName ||\n    node.nodeName.toLowerCase() === nodeName.toLowerCase()\n  )\n}\n\n/**\n * Reconstruct Component-style `props` from a VNode.\n * Ensures default/fallback values from `defaultProps`:\n * Own-properties of `defaultProps` not present in `vnode.attributes` are added.\n *\n * @param {VNode} vnode\n * @returns {Object} props\n */\nexport function getNodeProps(vnode) {\n  let props = extend({}, vnode.attributes)\n  props.children = vnode.children\n\n  let defaultProps = vnode.nodeName.defaultProps\n  if (defaultProps !== undefined) {\n    for (let i in defaultProps) {\n      if (props[i] === undefined) {\n        props[i] = defaultProps[i]\n      }\n    }\n  }\n\n  return props\n}\n","import { pathToArr } from './util'\n\nexport const extension = {}\n\nexport function extend(name, handler) {\n  extension['o-' + name] = handler\n}\n\nexport function set(origin, path, value) {\n  const arr = pathToArr(path)\n  let current = origin\n  for (let i = 0, len = arr.length; i < len; i++) {\n    if (i === len - 1) {\n      current[arr[i]] = value\n    } else {\n      current = current[arr[i]]\n    }\n  }\n}\n\nexport function get(origin, path) {\n  const arr = pathToArr(path)\n  let current = origin\n  for (let i = 0, len = arr.length; i < len; i++) {\n    current = current[arr[i]]\n  }\n\n  return current\n}\n\nfunction eventProxy(e) {\n  return this._listeners[e.type](e)\n}\n\nexport function bind(el, type, handler) {\n  el._listeners = el._listeners || {}\n  el._listeners[type] = handler\n  el.addEventListener(type, eventProxy)\n}\n\nexport function unbind(el, type) {\n  el.removeEventListener(type, eventProxy)\n}\n","import { IS_NON_DIMENSIONAL } from '../constants'\nimport { applyRef } from '../util'\nimport options from '../options'\nimport { extension } from '../extend'\n\n/**\n * Create an element with the given nodeName.\n * @param {string} nodeName The DOM node to create\n * @param {boolean} [isSvg=false] If `true`, creates an element within the SVG\n *  namespace.\n * @returns {Element} The created DOM node\n */\nexport function createNode(nodeName, isSvg) {\n  /** @type {Element} */\n  let node = isSvg\n    ? document.createElementNS('http://www.w3.org/2000/svg', nodeName)\n    : document.createElement(nodeName)\n  node.normalizedNodeName = nodeName\n  return node\n}\n\n/**\n * Remove a child node from its parent if attached.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n  let parentNode = node.parentNode\n  if (parentNode) parentNode.removeChild(node)\n}\n\n/**\n * Set a named attribute on the given Node, with special behavior for some names\n * and event handlers. If `value` is `null`, the attribute/handler will be\n * removed.\n * @param {Element} node An element to mutate\n * @param {string} name The name/key to set, such as an event or attribute name\n * @param {*} old The last value that was set for this name/node pair\n * @param {*} value An attribute value, such as a function to be used as an\n *  event handler\n * @param {boolean} isSvg Are we currently diffing inside an svg?\n * @private\n */\nexport function setAccessor(node, name, old, value, isSvg, component) {\n  if (name === 'className') name = 'class'\n\n  if (name[0] == 'o' && name[1] == '-') {\n    if (extension[name]) {\n      extension[name](node, value, component)\n    }\n  } else if (name === 'key') {\n    // ignore\n  } else if (name === 'ref') {\n    applyRef(old, null)\n    applyRef(value, node)\n  } else if (name === 'class' && !isSvg) {\n    node.className = value || ''\n  } else if (name === 'style') {\n    if (!value || typeof value === 'string' || typeof old === 'string') {\n      node.style.cssText = value || ''\n    }\n    if (value && typeof value === 'object') {\n      if (typeof old !== 'string') {\n        for (let i in old) if (!(i in value)) node.style[i] = ''\n      }\n      for (let i in value) {\n        node.style[i] =\n          typeof value[i] === 'number' && IS_NON_DIMENSIONAL.test(i) === false\n            ? value[i] + 'px'\n            : value[i]\n      }\n    }\n  } else if (name === 'dangerouslySetInnerHTML') {\n    if (value) node.innerHTML = value.__html || ''\n  } else if (\n    name[0] == '_' &&\n    name[1] == 'o' &&\n    name[2] == 'n' &&\n    node.constructor.is === 'WeElement'\n  ) {\n    bindEvent(node, name.replace('_', ''), value, old)\n  } else if (name[0] == 'o' && name[1] == 'n') {\n    bindEvent(node, name, value, old)\n  } else if (node.nodeName === 'INPUT' && name === 'value') {\n    node[name] = value == null ? '' : value\n  } else if (\n    name !== 'list' &&\n    name !== 'type' &&\n    name !== 'css' &&\n    !isSvg &&\n    name in node &&\n    value !== ''\n  ) {\n    //value !== '' fix for selected, disabled, checked with pure element\n    // Attempt to set a DOM property to the given value.\n    // IE & FF throw for certain property-value combinations.\n    try {\n      node[name] = value == null ? '' : value\n    } catch (e) {}\n    if ((value == null || value === false) && name != 'spellcheck')\n      node.pureRemoveAttribute\n        ? node.pureRemoveAttribute(name)\n        : node.removeAttribute(name)\n  } else {\n    let ns = isSvg && name !== (name = name.replace(/^xlink:?/, ''))\n    // spellcheck is treated differently than all other boolean values and\n    // should not be removed when the value is `false`. See:\n    // https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-spellcheck\n    if (value == null || value === false) {\n      if (ns)\n        node.removeAttributeNS(\n          'http://www.w3.org/1999/xlink',\n          name.toLowerCase()\n        )\n      else\n        node.pureRemoveAttribute\n          ? node.pureRemoveAttribute(name)\n          : node.removeAttribute(name)\n    } else if (typeof value !== 'function') {\n      if (ns) {\n        node.setAttributeNS(\n          'http://www.w3.org/1999/xlink',\n          name.toLowerCase(),\n          value\n        )\n      } else {\n        node.pureSetAttribute\n          ? node.pureSetAttribute(name, value)\n          : node.setAttribute(name, value)\n      }\n    }\n  }\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n  return this._listeners[e.type]((options.event && options.event(e)) || e)\n}\n\nfunction bindEvent(node, name, value, old) {\n  let useCapture = name !== (name = name.replace(/Capture$/, ''))\n  let nameLower = name.toLowerCase()\n  name = (nameLower in node ? nameLower : name).slice(2)\n  if (value) {\n    if (!old) {\n      node.addEventListener(name, eventProxy, useCapture)\n    }\n  } else {\n    node.removeEventListener(name, eventProxy, useCapture)\n  }\n  ;(node._listeners || (node._listeners = {}))[name] = value\n}\n","import { ATTR_KEY } from '../constants'\nimport { isSameNodeType, isNamedNode } from './index'\nimport { createNode, setAccessor } from '../dom/index'\nimport { camelCase, isArray, Fragment } from '../util'\nimport { removeNode } from '../dom/index'\nimport options from '../options'\n\n/** Queue of components that have been mounted and are awaiting componentDidMount */\nexport const mounts = []\n\n/** Diff recursion count, used to track the end of the diff cycle. */\nexport let diffLevel = 0\n\n/** Global flag indicating if the diff is currently within an SVG */\nlet isSvgMode = false\n\n/** Global flag indicating if the diff is performing hydration */\nlet hydrating = false\n\n/** Apply differences in a given vnode (and it's deep children) to a real DOM Node.\n *  @param {Element} [dom=null]    A DOM node to mutate into the shape of the `vnode`\n *  @param {VNode} vnode      A VNode (with descendants forming a tree) representing the desired DOM structure\n *  @returns {Element} dom      The created/mutated element\n *  @private\n */\nexport function diff(dom, vnode, parent, component, updateSelf) {\n  //first render return undefined\n  if (!dom && !vnode) return\n  // diffLevel having been 0 here indicates initial entry into the diff (not a subdiff)\n  let ret\n  if (!diffLevel++) {\n    // when first starting the diff, check if we're diffing an SVG or within an SVG\n    isSvgMode = parent != null && parent.ownerSVGElement !== undefined\n\n    // hydration is indicated by the existing element to be diffed not having a prop cache\n    hydrating = dom != null && !(ATTR_KEY in dom)\n  }\n  if (vnode && vnode.nodeName === Fragment) {\n    vnode = vnode.children\n  }\n  if (isArray(vnode)) {\n    if (parent) {\n      //don't use css and props.css when using h.f\n      innerDiffNode(parent, vnode, hydrating, component, updateSelf)\n    } else {\n      ret = []\n      vnode.forEach((item, index) => {\n        let ele = idiff(index === 0 ? dom : null, item, component, updateSelf)\n        ret.push(ele)\n      })\n    }\n  } else {\n    if (isArray(dom)) {\n      dom.forEach((one, index) => {\n        if (index === 0) {\n          ret = idiff(one, vnode, component, updateSelf)\n        } else {\n          recollectNodeTree(one, false)\n        }\n      })\n    } else {\n      ret = idiff(dom, vnode, component, updateSelf)\n    }\n    // append the element if its a new parent\n    if (parent && ret.parentNode !== parent) parent.appendChild(ret)\n  }\n\n  // diffLevel being reduced to 0 means we're exiting the diff\n  if (!--diffLevel) {\n    hydrating = false\n    // invoke queued componentDidMount lifecycle methods\n  }\n\n  return ret\n}\n\n/** Internals of `diff()`, separated to allow bypassing diffLevel / mount flushing. */\nfunction idiff(dom, vnode, component, updateSelf) {\n  if (dom && vnode && dom.props) {\n    dom.props.children = vnode.children\n  }\n  let out = dom,\n    prevSvgMode = isSvgMode\n\n  // empty values (null, undefined, booleans) render as empty Text nodes\n  if (vnode == null || typeof vnode === 'boolean') vnode = ''\n\n  // Fast case: Strings & Numbers create/update Text nodes.\n  if (typeof vnode === 'string' || typeof vnode === 'number') {\n    // update if it's already a Text node:\n    if (\n      dom &&\n      dom.splitText !== undefined &&\n      dom.parentNode &&\n      (!dom._component || component)\n    ) {\n      /* istanbul ignore if */ /* Browser quirk that can't be covered: https://github.com/developit/preact/commit/fd4f21f5c45dfd75151bd27b4c217d8003aa5eb9 */\n      if (dom.nodeValue != vnode) {\n        dom.nodeValue = vnode\n      }\n    } else {\n      // it wasn't a Text node: replace it with one and recycle the old Element\n      out = document.createTextNode(vnode)\n      if (dom) {\n        if (dom.parentNode) dom.parentNode.replaceChild(out, dom)\n        recollectNodeTree(dom, true)\n      }\n    }\n\n    out[ATTR_KEY] = true\n\n    return out\n  }\n\n  // If the VNode represents a Component, perform a component diff:\n  let vnodeName = vnode.nodeName\n  if (typeof vnodeName === 'function') {\n    for (let key in options.mapping) {\n      if (options.mapping[key] === vnodeName) {\n        vnodeName = key\n        vnode.nodeName = key\n        break\n      }\n    }\n  }\n  // Tracks entering and exiting SVG namespace when descending through the tree.\n  isSvgMode =\n    vnodeName === 'svg'\n      ? true\n      : vnodeName === 'foreignObject'\n      ? false\n      : isSvgMode\n\n  // If there's no existing element or it's the wrong type, create a new one:\n  vnodeName = String(vnodeName)\n  if (!dom || !isNamedNode(dom, vnodeName)) {\n    out = createNode(vnodeName, isSvgMode)\n\n    if (dom) {\n      // move children into the replacement node\n      while (dom.firstChild) out.appendChild(dom.firstChild)\n\n      // if the previous Element was mounted into the DOM, replace it inline\n      if (dom.parentNode) dom.parentNode.replaceChild(out, dom)\n\n      // recycle the old element (skips non-Element node types)\n      recollectNodeTree(dom, true)\n    }\n  }\n\n  let fc = out.firstChild,\n    props = out[ATTR_KEY],\n    vchildren = vnode.children\n\n  if (props == null) {\n    props = out[ATTR_KEY] = {}\n    for (let a = out.attributes, i = a.length; i--; )\n      props[a[i].name] = a[i].value\n  }\n\n  // Optimization: fast-path for elements containing a single TextNode:\n  if (\n    !hydrating &&\n    vchildren &&\n    vchildren.length === 1 &&\n    typeof vchildren[0] === 'string' &&\n    fc != null &&\n    fc.splitText !== undefined &&\n    fc.nextSibling == null\n  ) {\n    if (fc.nodeValue != vchildren[0]) {\n      fc.nodeValue = vchildren[0]\n    }\n  }\n  // otherwise, if there are existing or new children, diff them:\n  else if ((vchildren && vchildren.length) || fc != null) {\n    if (!(out.constructor.is == 'WeElement' && out.constructor.noSlot)) {\n      innerDiffNode(\n        out,\n        vchildren,\n        hydrating || props.dangerouslySetInnerHTML != null,\n        component,\n        updateSelf\n      )\n    }\n  }\n\n  // Apply attributes/props from VNode to the DOM Element:\n  diffAttributes(out, vnode.attributes, props, component, updateSelf)\n  if (out.props) {\n    out.props.children = vnode.children\n  }\n  // restore previous SVG mode: (in case we're exiting an SVG namespace)\n  isSvgMode = prevSvgMode\n\n  return out\n}\n\n/** Apply child and attribute changes between a VNode and a DOM Node to the DOM.\n *  @param {Element} dom      Element whose children should be compared & mutated\n *  @param {Array} vchildren    Array of VNodes to compare to `dom.childNodes`\n *  @param {Boolean} isHydrating  If `true`, consumes externally created elements similar to hydration\n */\nfunction innerDiffNode(dom, vchildren, isHydrating, component, updateSelf) {\n  let originalChildren = dom.childNodes,\n    children = [],\n    keyed = {},\n    keyedLen = 0,\n    min = 0,\n    len = originalChildren.length,\n    childrenLen = 0,\n    vlen = vchildren ? vchildren.length : 0,\n    j,\n    c,\n    f,\n    vchild,\n    child\n\n  // Build up a map of keyed children and an Array of unkeyed children:\n  if (len !== 0) {\n    for (let i = 0; i < len; i++) {\n      let child = originalChildren[i],\n        props = child[ATTR_KEY],\n        key =\n          vlen && props\n            ? child._component\n              ? child._component.__key\n              : props.key\n            : null\n      if (key != null) {\n        keyedLen++\n        keyed[key] = child\n      } else if (\n        props ||\n        (child.splitText !== undefined\n          ? isHydrating\n            ? child.nodeValue.trim()\n            : true\n          : isHydrating)\n      ) {\n        children[childrenLen++] = child\n      }\n    }\n  }\n\n  if (vlen !== 0) {\n    for (let i = 0; i < vlen; i++) {\n      vchild = vchildren[i]\n      child = null\n\n      if (vchild) {\n        // attempt to find a node based on key matching\n        let key = vchild.key\n        if (key != null) {\n          if (keyedLen && keyed[key] !== undefined) {\n            child = keyed[key]\n            keyed[key] = undefined\n            keyedLen--\n          }\n        }\n        // attempt to pluck a node of the same type from the existing children\n        else if (!child && min < childrenLen) {\n          for (j = min; j < childrenLen; j++) {\n            if (\n              children[j] !== undefined &&\n              isSameNodeType((c = children[j]), vchild, isHydrating)\n            ) {\n              child = c\n              children[j] = undefined\n              if (j === childrenLen - 1) childrenLen--\n              if (j === min) min++\n              break\n            }\n          }\n        }\n      }\n\n      // morph the matched/found/created DOM child to match vchild (deep)\n      child = idiff(child, vchild, component, updateSelf)\n\n      f = originalChildren[i]\n      if (child && child !== dom && child !== f) {\n        if (f == null) {\n          dom.appendChild(child)\n        } else if (child === f.nextSibling) {\n          removeNode(f)\n        } else {\n          dom.insertBefore(child, f)\n        }\n      }\n    }\n  }\n\n  // remove unused keyed children:\n  if (keyedLen) {\n    for (let i in keyed)\n      if (keyed[i] !== undefined) recollectNodeTree(keyed[i], false)\n  }\n\n  // remove orphaned unkeyed children:\n  while (min <= childrenLen) {\n    if ((child = children[childrenLen--]) !== undefined)\n      recollectNodeTree(child, false)\n  }\n}\n\n/** Recursively recycle (or just unmount) a node and its descendants.\n *  @param {Node} node            DOM node to start unmount/removal from\n *  @param {Boolean} [unmountOnly=false]  If `true`, only triggers unmount lifecycle, skips removal\n */\nexport function recollectNodeTree(node, unmountOnly) {\n  // If the node's VNode had a ref function, invoke it with null here.\n  // (this is part of the React spec, and smart for unsetting references)\n  if (node[ATTR_KEY] != null && node[ATTR_KEY].ref) {\n    if (typeof node[ATTR_KEY].ref === 'function') {\n      node[ATTR_KEY].ref(null)\n    } else if (node[ATTR_KEY].ref.current) {\n      node[ATTR_KEY].ref.current = null\n    }\n  }\n\n  if (unmountOnly === false || node[ATTR_KEY] == null) {\n    removeNode(node)\n  }\n\n  removeChildren(node)\n}\n\n/** Recollect/unmount all children.\n *  - we use .lastChild here because it causes less reflow than .firstChild\n *  - it's also cheaper than accessing the .childNodes Live NodeList\n */\nexport function removeChildren(node) {\n  node = node.lastChild\n  while (node) {\n    let next = node.previousSibling\n    recollectNodeTree(node, true)\n    node = next\n  }\n}\n\n/** Apply differences in attributes from a VNode to the given DOM Element.\n *  @param {Element} dom    Element with attributes to diff `attrs` against\n *  @param {Object} attrs    The desired end-state key-value attribute pairs\n *  @param {Object} old      Current/previous attributes (from previous VNode or element's prop cache)\n */\nfunction diffAttributes(dom, attrs, old, component, updateSelf) {\n  let name\n  //let update = false\n  let isWeElement = dom.update\n  let oldClone\n  if (dom.receiveProps) {\n    oldClone = Object.assign({}, old)\n  }\n  // remove attributes no longer present on the vnode by setting them to undefined\n  for (name in old) {\n    if (!(attrs && attrs[name] != null) && old[name] != null) {\n      setAccessor(\n        dom,\n        name,\n        old[name],\n        (old[name] = undefined),\n        isSvgMode,\n        component\n      )\n      if (isWeElement) {\n        delete dom.props[name]\n        //update = true\n      }\n    }\n  }\n\n  // add new & update changed attributes\n  for (name in attrs) {\n    if (isWeElement && typeof attrs[name] === 'object' && name !== 'ref') {\n      if (name === 'style') {\n        setAccessor(\n          dom,\n          name,\n          old[name],\n          (old[name] = attrs[name]),\n          isSvgMode,\n          component\n        )\n      }\n      let ccName = camelCase(name)\n      dom.props[ccName] = old[ccName] = attrs[name]\n      //update = true\n    } else if (\n      name !== 'children' &&\n      (!(name in old) ||\n        attrs[name] !==\n          (name === 'value' || name === 'checked' ? dom[name] : old[name]))\n    ) {\n      setAccessor(dom, name, old[name], attrs[name], isSvgMode, component)\n      //fix lazy load props missing\n      if (dom.nodeName.indexOf('-') !== -1) {\n        dom.props = dom.props || {}\n        let ccName = camelCase(name)\n        dom.props[ccName] = old[ccName] = attrs[name]\n        //update = true\n      } else {\n        old[name] = attrs[name]\n      }\n    }\n  }\n\n  if (isWeElement && !updateSelf && dom.parentNode) {\n    //__hasChildren is not accuracy when it was empty at first, so add dom.children.length > 0 condition\n    //if (update || dom.__hasChildren || dom.children.length > 0 || (dom.store && !dom.store.data)) {\n    if (dom.receiveProps(dom.props, oldClone) !== false) {\n      dom.update()\n    }\n    //}\n  }\n}\n","import {\n\tcssToDom,\n\tisArray,\n\thyphenate,\n\tgetValByPath,\n\tremoveItem\n} from './util'\nimport { diff } from './vdom/diff'\nimport options from './options'\n\nlet id = 0\n\nexport default class WeElement extends HTMLElement {\n\tstatic is = 'WeElement'\n\n\tconstructor() {\n\t\tsuper()\n\t\t// fix lazy load props missing\n\t\tthis.props = Object.assign({}, this.constructor.defaultProps, this.props)\n\t\tthis.elementId = id++\n\t\tthis.computed = {}\n\t\tthis.isInstalled = false\n\t}\n\n\tconnectedCallback() {\n\t\tlet p = this.parentNode\n\t\twhile (p && !this.store) {\n\t\t\tthis.store = p.store\n\t\t\tp = p.parentNode || p.host\n\t\t}\n\n\t\tthis.attrsToProps()\n\n\n\n\n\t\tthis.beforeInstall()\n\t\tthis.install()\n\t\tthis.afterInstall()\n\n\t\tlet shadowRoot\n\t\tif (this.constructor.isLightDom) {\n\t\t\tshadowRoot = this\n\t\t} else {\n\t\t\tif (!this.shadowRoot) {\n\t\t\t\tshadowRoot = this.attachShadow({\n\t\t\t\t\tmode: 'open'\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tshadowRoot = this.shadowRoot\n\t\t\t\tlet fc\n\t\t\t\twhile ((fc = shadowRoot.firstChild)) {\n\t\t\t\t\tshadowRoot.removeChild(fc)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst css = this.constructor.css\n\t\tif (css) {\n\t\t\tif (typeof css === 'string') {\n\t\t\t\tconst styleSheet = new CSSStyleSheet()\n\t\t\t\tstyleSheet.replaceSync(css)\n\t\t\t\tshadowRoot.adoptedStyleSheets = [styleSheet]\n\t\t\t} else if (Object.prototype.toString.call(css) === '[object Array]') {\n\t\t\t\tconst styleSheets = []\n\t\t\t\tcss.forEach(styleSheet => {\n\t\t\t\t\tif (typeof styleSheet === 'string') {\n\t\t\t\t\t\tconst adoptedStyleSheet = new CSSStyleSheet()\n\t\t\t\t\t\tadoptedStyleSheet.replaceSync(styleSheet)\n\t\t\t\t\t\tstyleSheets.push(adoptedStyleSheet)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstyleSheets.push(styleSheet)\n\t\t\t\t\t}\n\t\t\t\t\tshadowRoot.adoptedStyleSheets = styleSheets\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tshadowRoot.adoptedStyleSheets = [css]\n\t\t\t}\n\t\t}\n\n\t\tthis.beforeRender()\n\t\toptions.afterInstall && options.afterInstall(this)\n\n\t\tconst rendered = this.render(this.props, this.store)\n\n\t\tthis.rootNode = diff(null, rendered, null, this)\n\t\tthis.rendered()\n\n\t\tif (this.css) {\n\t\t\tshadowRoot.appendChild(\n\t\t\t\tcssToDom(typeof this.css === 'function' ? this.css() : this.css)\n\t\t\t)\n\t\t}\n\n\t\tif (this.props.css) {\n\t\t\tthis._customStyleElement = cssToDom(this.props.css)\n\t\t\tthis._customStyleContent = this.props.css\n\t\t\tshadowRoot.appendChild(this._customStyleElement)\n\t\t}\n\n\t\tif (isArray(this.rootNode)) {\n\t\t\tthis.rootNode.forEach(function (item) {\n\t\t\t\tshadowRoot.appendChild(item)\n\t\t\t})\n\t\t} else {\n\t\t\tthis.rootNode && shadowRoot.appendChild(this.rootNode)\n\t\t}\n\t\tthis.installed()\n\t\tthis.isInstalled = true\n\t}\n\n\tdisconnectedCallback() {\n\t\tthis.uninstall()\n\t\tthis.isInstalled = false\n\n\t}\n\n\tupdate(ignoreAttrs, updateSelf) {\n\t\tthis._willUpdate = true\n\t\tthis.beforeUpdate()\n\t\tthis.beforeRender()\n\t\t//fix null !== undefined\n\t\tif (this._customStyleContent != this.props.css) {\n\t\t\tthis._customStyleContent = this.props.css\n\t\t\tthis._customStyleElement.textContent = this._customStyleContent\n\t\t}\n\t\tthis.attrsToProps(ignoreAttrs)\n\n\t\tconst rendered = this.render(this.props, this.store)\n\t\tthis.rendered()\n\n\t\tthis.rootNode = diff(\n\t\t\tthis.rootNode,\n\t\t\trendered,\n\t\t\tthis.constructor.isLightDom ? this : this.shadowRoot,\n\t\t\tthis,\n\t\t\tupdateSelf\n\t\t)\n\t\tthis._willUpdate = false\n\t\tthis.updated()\n\t}\n\n\tforceUpdate() {\n\t\tthis.update(true)\n\t}\n\n\tupdateProps(obj) {\n\t\tObject.keys(obj).forEach(key => {\n\t\t\tthis.props[key] = obj[key]\n\t\t\tif (this.prevProps) {\n\t\t\t\tthis.prevProps[key] = obj[key]\n\t\t\t}\n\t\t})\n\t\tthis.forceUpdate()\n\t}\n\n\tupdateSelf(ignoreAttrs) {\n\t\tthis.update(ignoreAttrs, true)\n\t}\n\n\tremoveAttribute(key) {\n\t\tsuper.removeAttribute(key)\n\t\t//Avoid executing removeAttribute methods before connectedCallback\n\t\tthis.isInstalled && this.update()\n\t}\n\n\tsetAttribute(key, val) {\n\t\tif (val && typeof val === 'object') {\n\t\t\tsuper.setAttribute(key, JSON.stringify(val))\n\t\t} else {\n\t\t\tsuper.setAttribute(key, val)\n\t\t}\n\t\t//Avoid executing setAttribute methods before connectedCallback\n\t\tthis.isInstalled && this.update()\n\t}\n\n\tpureRemoveAttribute(key) {\n\t\tsuper.removeAttribute(key)\n\t}\n\n\tpureSetAttribute(key, val) {\n\t\tsuper.setAttribute(key, val)\n\t}\n\n\tattrsToProps(ignoreAttrs) {\n\t\tif (\n\t\t\tignoreAttrs ||\n\t\t\t(this.store && this.store.ignoreAttrs) ||\n\t\t\tthis.props.ignoreAttrs\n\t\t)\n\t\t\treturn\n\t\tconst ele = this\n\t\tele.props['css'] = ele.getAttribute('css')\n\t\tconst attrs = this.constructor.propTypes\n\t\tif (!attrs) return\n\t\tObject.keys(attrs).forEach(key => {\n\t\t\tconst type = attrs[key]\n\t\t\tconst val = ele.getAttribute(hyphenate(key))\n\t\t\tif (val !== null) {\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase String:\n\t\t\t\t\t\tele.props[key] = val\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase Number:\n\t\t\t\t\t\tele.props[key] = Number(val)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase Boolean:\n\t\t\t\t\t\tif (val === 'false' || val === '0') {\n\t\t\t\t\t\t\tele.props[key] = false\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tele.props[key] = true\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase Array:\n\t\t\t\t\tcase Object:\n\t\t\t\t\t\tif (val[0] === ':') {\n\t\t\t\t\t\t\tele.props[key] = getValByPath(val.substr(1), Omi.$)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tele.props[key] = JSON.parse(\n\t\t\t\t\t\t\t\tval\n\t\t\t\t\t\t\t\t\t.replace(/(['\"])?([a-zA-Z0-9_-]+)(['\"])?:([^\\/])/g, '\"$2\":$4')\n\t\t\t\t\t\t\t\t\t.replace(/'([\\s\\S]*?)'/g, '\"$1\"')\n\t\t\t\t\t\t\t\t\t.replace(/,(\\s*})/g, '$1')\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tele.constructor.defaultProps &&\n\t\t\t\t\tele.constructor.defaultProps.hasOwnProperty(key)\n\t\t\t\t) {\n\t\t\t\t\tele.props[key] = ele.constructor.defaultProps[key]\n\t\t\t\t} else {\n\t\t\t\t\tele.props[key] = null\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tfire(name, data) {\n\t\tthis.dispatchEvent(\n\t\t\tnew CustomEvent(name, {\n\t\t\t\tdetail: data\n\t\t\t})\n\t\t)\n\t}\n\n\tbeforeInstall() { }\n\n\tinstall() { }\n\n\tafterInstall() { }\n\n\tinstalled() { }\n\n\tuninstall() { }\n\n\tbeforeUpdate() { }\n\n\tupdated() { }\n\n\tbeforeRender() { }\n\n\trendered() { }\n\n\treceiveProps() { }\n}\n","import { diff } from './vdom/diff'\n\nexport function render(vnode, parent, store) {\n\tparent = typeof parent === 'string' ? document.querySelector(parent) : parent\n\tif (store) {\n\t\tparent.store = store\n\t}\n\treturn diff(null, vnode, parent, false)\n}\n\n\n\n","import WeElement from './we-element'\nimport options from './options'\n\nconst storeHelpers = ['use', 'useSelf']\n\nexport function define(name, ctor, config) {\n  if (customElements.get(name)) {\n    return\n  }\n  if (options.mapping[name]) {\n    return\n  }\n  if (ctor.is === 'WeElement') {\n    customElements.define(name, ctor)\n    options.mapping[name] = ctor\n  } else {\n    if (typeof config === 'string') {\n      config = { css: config }\n    } else {\n      config = config || {}\n    }\n\n    class Ele extends WeElement {\n      static css = config.css\n\n      static propTypes = config.propTypes\n\n      static defaultProps = config.defaultProps\n\n      static isLightDom = config.isLightDom\n\n      compute = config.compute\n\n      render() {\n        return ctor.call(this, this)\n      }\n    }\n\n    for (let key in config) {\n      if (typeof config[key] === 'function') {\n        Ele.prototype[key] = function() {\n          return config[key].apply(this, arguments)\n        }\n      }\n    }\n\n    storeHelpers.forEach(func => {\n      if (config[func] && config[func] !== 'function') {\n        Ele.prototype[func] = function() {\n          return config[func]\n        }\n      }\n    })\n\n    customElements.define(name, Ele)\n    options.mapping[name] = Ele\n  }\n}\n","import { extend } from './util'\nimport { h } from './h'\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {VNode} vnode    The virtual DOM element to clone\n * @param {Object} props  Attributes/props to add when cloning\n * @param {VNode} rest    Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n  return h(\n    vnode.nodeName,\n    extend(extend({}, vnode.attributes), props),\n    arguments.length > 2 ? [].slice.call(arguments, 2) : vnode.children\n  )\n}\n","export function getHost(ele) {\n  let p = ele.parentNode\n  while (p) {\n    if (p.host) {\n      return p.host\n    } else if (p.shadowRoot && p.shadowRoot.host) {\n      return p.shadowRoot.host\n    } else {\n      p = p.parentNode\n    }\n  }\n}\n","/**\n * classNames based on https://github.com/JedWatson/classnames\n * by Jed Watson\n * Licensed under the MIT License\n * https://github.com/JedWatson/classnames/blob/master/LICENSE\n * modified by dntzhang\n */\n\nvar hasOwn = {}.hasOwnProperty\n\nexport function classNames() {\n  var classes = []\n\n  for (var i = 0; i < arguments.length; i++) {\n    var arg = arguments[i]\n    if (!arg) continue\n\n    var argType = typeof arg\n\n    if (argType === 'string' || argType === 'number') {\n      classes.push(arg)\n    } else if (Array.isArray(arg) && arg.length) {\n      var inner = classNames.apply(null, arg)\n      if (inner) {\n        classes.push(inner)\n      }\n    } else if (argType === 'object') {\n      for (var key in arg) {\n        if (hasOwn.call(arg, key) && arg[key]) {\n          classes.push(key)\n        }\n      }\n    }\n  }\n\n  return classes.join(' ')\n}\n\nexport function extractClass() {\n  const [props, ...args] = Array.prototype.slice.call(arguments, 0)\n  if (props.class) {\n    args.unshift(props.class)\n    delete props.class\n  } else if (props.className) {\n    args.unshift(props.className)\n    delete props.className\n  }\n  if (args.length > 0) {\n    return { class: classNames.apply(null, args) }\n  }\n}\n","(function () {\n    'use strict';\n\n    if ('adoptedStyleSheets' in document) { return; }\n\n    var hasShadyCss = 'ShadyCSS' in window && !ShadyCSS.nativeShadow;\n    var bootstrapper = document.implementation.createHTMLDocument('boot');\n    var closedShadowRootRegistry = new WeakMap();\n    var _DOMException = typeof DOMException === 'object' ? Error : DOMException;\n\n    var defineProperty = Object.defineProperty;\n    var forEach = Array.prototype.forEach;\n    var importPattern = /@import.+?;?$/gm;\n    function rejectImports(contents) {\n        var _contents = contents.replace(importPattern, '');\n        if (_contents !== contents) {\n            console.warn('@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418');\n        }\n        return _contents.trim();\n    }\n    function clearRules(sheet) {\n        for (var i = 0; i < sheet.cssRules.length; i++) {\n            sheet.deleteRule(0);\n        }\n    }\n    function insertAllRules(from, to) {\n        forEach.call(from.cssRules, function (rule, i) {\n            to.insertRule(rule.cssText, i);\n        });\n    }\n    function isElementConnected(element) {\n        return 'isConnected' in element\n            ? element.isConnected\n            : document.contains(element);\n    }\n    function unique(arr) {\n        return arr.filter(function (value, index) { return arr.indexOf(value) === index; });\n    }\n    function diff(arr1, arr2) {\n        return arr1.filter(function (value) { return arr2.indexOf(value) === -1; });\n    }\n    function removeNode(node) {\n        node.parentNode.removeChild(node);\n    }\n    function getShadowRoot(element) {\n        return element.shadowRoot || closedShadowRootRegistry.get(element);\n    }\n\n    var cssStyleSheetMethods = [\n        'addImport',\n        'addPageRule',\n        'addRule',\n        'deleteRule',\n        'insertRule',\n        'removeImport',\n        'removeRule',\n    ];\n    var NonConstructedStyleSheet = CSSStyleSheet;\n    var nonConstructedProto = NonConstructedStyleSheet.prototype;\n    nonConstructedProto.replace = function () {\n        return Promise.reject(new _DOMException(\"Can't call replace on non-constructed CSSStyleSheets.\"));\n    };\n    nonConstructedProto.replaceSync = function () {\n        throw new _DOMException(\"Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.\");\n    };\n    function isCSSStyleSheetInstance(instance) {\n        return typeof instance === 'object'\n            ? proto$2.isPrototypeOf(instance) ||\n                nonConstructedProto.isPrototypeOf(instance)\n            : false;\n    }\n    function isNonConstructedStyleSheetInstance(instance) {\n        return typeof instance === 'object'\n            ? nonConstructedProto.isPrototypeOf(instance)\n            : false;\n    }\n    var $basicStyleSheet = new WeakMap();\n    var $locations = new WeakMap();\n    var $adoptersByLocation = new WeakMap();\n    function addAdopterLocation(sheet, location) {\n        var adopter = document.createElement('style');\n        $adoptersByLocation.get(sheet).set(location, adopter);\n        $locations.get(sheet).push(location);\n        return adopter;\n    }\n    function getAdopterByLocation(sheet, location) {\n        return $adoptersByLocation.get(sheet).get(location);\n    }\n    function removeAdopterLocation(sheet, location) {\n        $adoptersByLocation.get(sheet).delete(location);\n        $locations.set(sheet, $locations.get(sheet).filter(function (_location) { return _location !== location; }));\n    }\n    function restyleAdopter(sheet, adopter) {\n        requestAnimationFrame(function () {\n            clearRules(adopter.sheet);\n            insertAllRules($basicStyleSheet.get(sheet), adopter.sheet);\n        });\n    }\n    function checkInvocationCorrectness(self) {\n        if (!$basicStyleSheet.has(self)) {\n            throw new TypeError('Illegal invocation');\n        }\n    }\n    function ConstructedStyleSheet() {\n        var self = this;\n        var style = document.createElement('style');\n        bootstrapper.body.appendChild(style);\n        $basicStyleSheet.set(self, style.sheet);\n        $locations.set(self, []);\n        $adoptersByLocation.set(self, new WeakMap());\n    }\n    var proto$2 = ConstructedStyleSheet.prototype;\n    proto$2.replace = function replace(contents) {\n        try {\n            this.replaceSync(contents);\n            return Promise.resolve(this);\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    };\n    proto$2.replaceSync = function replaceSync(contents) {\n        checkInvocationCorrectness(this);\n        if (typeof contents === 'string') {\n            var self_1 = this;\n            var style = $basicStyleSheet.get(self_1).ownerNode;\n            style.textContent = rejectImports(contents);\n            $basicStyleSheet.set(self_1, style.sheet);\n            $locations.get(self_1).forEach(function (location) {\n                if (location.isConnected()) {\n                    restyleAdopter(self_1, getAdopterByLocation(self_1, location));\n                }\n            });\n        }\n    };\n    defineProperty(proto$2, 'cssRules', {\n        configurable: true,\n        enumerable: true,\n        get: function cssRules() {\n            checkInvocationCorrectness(this);\n            return $basicStyleSheet.get(this).cssRules;\n        },\n    });\n    cssStyleSheetMethods.forEach(function (method) {\n        proto$2[method] = function () {\n            var self = this;\n            checkInvocationCorrectness(self);\n            var args = arguments;\n            var basic = $basicStyleSheet.get(self);\n            var locations = $locations.get(self);\n            var result = basic[method].apply(basic, args);\n            locations.forEach(function (location) {\n                if (location.isConnected()) {\n                    var sheet = getAdopterByLocation(self, location).sheet;\n                    sheet[method].apply(sheet, args);\n                }\n            });\n            return result;\n        };\n    });\n    defineProperty(ConstructedStyleSheet, Symbol.hasInstance, {\n        configurable: true,\n        value: isCSSStyleSheetInstance,\n    });\n\n    var defaultObserverOptions = {\n        childList: true,\n        subtree: true,\n    };\n    var locations = new WeakMap();\n    function getAssociatedLocation(element) {\n        var location = locations.get(element);\n        if (!location) {\n            location = new Location(element);\n            locations.set(element, location);\n        }\n        return location;\n    }\n    function attachAdoptedStyleSheetProperty(constructor) {\n        defineProperty(constructor.prototype, 'adoptedStyleSheets', {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                return getAssociatedLocation(this).sheets;\n            },\n            set: function (sheets) {\n                getAssociatedLocation(this).update(sheets);\n            },\n        });\n    }\n    function traverseWebComponents(node, callback) {\n        var iter = document.createNodeIterator(node, NodeFilter.SHOW_ELEMENT, function (foundNode) {\n            return getShadowRoot(foundNode)\n                ? NodeFilter.FILTER_ACCEPT\n                : NodeFilter.FILTER_REJECT;\n        },\n        null, false);\n        for (var next = void 0; (next = iter.nextNode());) {\n            callback(getShadowRoot(next));\n        }\n    }\n    var $element = new WeakMap();\n    var $uniqueSheets = new WeakMap();\n    var $observer = new WeakMap();\n    function isExistingAdopter(self, element) {\n        return (element instanceof HTMLStyleElement &&\n            $uniqueSheets.get(self).some(function (sheet) { return getAdopterByLocation(sheet, self); }));\n    }\n    function getAdopterContainer(self) {\n        var element = $element.get(self);\n        return element instanceof Document ? element.body : element;\n    }\n    function adopt(self) {\n        var styleList = document.createDocumentFragment();\n        var sheets = $uniqueSheets.get(self);\n        var observer = $observer.get(self);\n        var container = getAdopterContainer(self);\n        observer.disconnect();\n        sheets.forEach(function (sheet) {\n            styleList.appendChild(getAdopterByLocation(sheet, self) || addAdopterLocation(sheet, self));\n        });\n        container.insertBefore(styleList, null);\n        observer.observe(container, defaultObserverOptions);\n        sheets.forEach(function (sheet) {\n            restyleAdopter(sheet, getAdopterByLocation(sheet, self));\n        });\n    }\n    function Location(element) {\n        var self = this;\n        self.sheets = [];\n        $element.set(self, element);\n        $uniqueSheets.set(self, []);\n        $observer.set(self, new MutationObserver(function (mutations, observer) {\n            if (!document) {\n                observer.disconnect();\n                return;\n            }\n            mutations.forEach(function (mutation) {\n                if (!hasShadyCss) {\n                    forEach.call(mutation.addedNodes, function (node) {\n                        if (!(node instanceof Element)) {\n                            return;\n                        }\n                        traverseWebComponents(node, function (root) {\n                            getAssociatedLocation(root).connect();\n                        });\n                    });\n                }\n                forEach.call(mutation.removedNodes, function (node) {\n                    if (!(node instanceof Element)) {\n                        return;\n                    }\n                    if (isExistingAdopter(self, node)) {\n                        adopt(self);\n                    }\n                    if (!hasShadyCss) {\n                        traverseWebComponents(node, function (root) {\n                            getAssociatedLocation(root).disconnect();\n                        });\n                    }\n                });\n            });\n        }));\n    }\n    var proto$1 = Location.prototype;\n    proto$1.isConnected = function isConnected() {\n        var element = $element.get(this);\n        return element instanceof Document\n            ? element.readyState !== 'loading'\n            : isElementConnected(element.host);\n    };\n    proto$1.connect = function connect() {\n        var container = getAdopterContainer(this);\n        $observer.get(this).observe(container, defaultObserverOptions);\n        if ($uniqueSheets.get(this).length > 0) {\n            adopt(this);\n        }\n        traverseWebComponents(container, function (root) {\n            getAssociatedLocation(root).connect();\n        });\n    };\n    proto$1.disconnect = function disconnect() {\n        $observer.get(this).disconnect();\n    };\n    proto$1.update = function update(sheets) {\n        var self = this;\n        var locationType = $element.get(self) === document ? 'Document' : 'ShadowRoot';\n        if (!Array.isArray(sheets)) {\n            throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Iterator getter is not callable.\");\n        }\n        if (!sheets.every(isCSSStyleSheetInstance)) {\n            throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Failed to convert value to 'CSSStyleSheet'\");\n        }\n        if (sheets.some(isNonConstructedStyleSheetInstance)) {\n            throw new TypeError(\"Failed to set the 'adoptedStyleSheets' property on \" + locationType + \": Can't adopt non-constructed stylesheets\");\n        }\n        self.sheets = sheets;\n        var oldUniqueSheets = $uniqueSheets.get(self);\n        var uniqueSheets = unique(sheets);\n        var removedSheets = diff(oldUniqueSheets, uniqueSheets);\n        removedSheets.forEach(function (sheet) {\n            removeNode(getAdopterByLocation(sheet, self));\n            removeAdopterLocation(sheet, self);\n        });\n        $uniqueSheets.set(self, uniqueSheets);\n        if (self.isConnected() && uniqueSheets.length > 0) {\n            adopt(self);\n        }\n    };\n\n    window.CSSStyleSheet = ConstructedStyleSheet;\n    attachAdoptedStyleSheetProperty(Document);\n    if ('ShadowRoot' in window) {\n        attachAdoptedStyleSheetProperty(ShadowRoot);\n        var proto = Element.prototype;\n        var attach_1 = proto.attachShadow;\n        proto.attachShadow = function attachShadow(init) {\n            var root = attach_1.call(this, init);\n            if (init.mode === 'closed') {\n                closedShadowRootRegistry.set(this, root);\n            }\n            return root;\n        };\n    }\n    var documentLocation = getAssociatedLocation(document);\n    if (documentLocation.isConnected()) {\n        documentLocation.connect();\n    }\n    else {\n        document.addEventListener('DOMContentLoaded', documentLocation.connect.bind(documentLocation));\n    }\n\n}());\n","function getGlobal() {\n\tif (\n\t\ttypeof global !== 'object' ||\n\t\t!global ||\n\t\tglobal.Math !== Math ||\n\t\tglobal.Array !== Array\n\t) {\n\t\treturn (\n\t\t\tself ||\n\t\t\twindow ||\n\t\t\tglobal ||\n\t\t\t(function () {\n\t\t\t\treturn this\n\t\t\t})()\n\t\t)\n\t}\n\treturn global\n}\n\n/** Global options\n *  @public\n *  @namespace options {Object}\n */\nexport default {\n\tstore: null,\n\troot: getGlobal(),\n\tmapping: {},\n}\n","export function o(obj) {\n  return JSON.stringify(obj)\n}\n","import { h, h as createElement } from './h'\nimport options from './options'\nimport WeElement from './we-element'\nimport { render } from './render'\nimport { define } from './define'\nimport { tag } from './tag'\nimport { cloneElement } from './clone-element'\nimport { getHost } from './get-host'\nimport { rpx } from './rpx'\nimport { classNames, extractClass } from './class'\nimport { o } from './o'\nimport { extend, get, set, bind, unbind } from './extend'\nimport { Fragment } from './util'\nimport 'construct-style-sheets-polyfill'\n\nh.f = Fragment\n\nfunction createRef() {\n\treturn {}\n}\n\nconst $ = {}\nconst Component = WeElement\nconst defineElement = define\nconst elements = options.mapping\n\nconst omi = {\n\ttag,\n\tWeElement,\n\tComponent,\n\trender,\n\th,\n\tcreateElement,\n\toptions,\n\tdefine,\n\tcloneElement,\n\tgetHost,\n\trpx,\n\tdefineElement,\n\tclassNames,\n\textractClass,\n\tcreateRef,\n\to,\n\telements,\n\t$,\n\textend,\n\tget,\n\tset,\n\tbind,\n\tunbind\n}\n\noptions.root.Omi = omi\noptions.root.omi = omi\noptions.root.Omi.version = '6.20.0'\n\nexport default omi\n\nexport {\n\ttag,\n\tWeElement,\n\tComponent,\n\trender,\n\th,\n\tcreateElement,\n\toptions,\n\tdefine,\n\tcloneElement,\n\tgetHost,\n\trpx,\n\tdefineElement,\n\tclassNames,\n\textractClass,\n\tcreateRef,\n\to,\n\telements,\n\t$,\n\textend,\n\tget,\n\tset,\n\tbind,\n\tunbind\n}\n"]}